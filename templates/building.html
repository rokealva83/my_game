{% extends "base.html" %}

{% block title %}Строительство{% endblock %}

{% block content %}
    <div id="game_content">
        {{ message }}
        {% if turn_assembly_piecess %}
            <div class="game_content_up">
                <p> Очередь создания заготовки </p>
                {% for turn_assembly_pieces in turn_assembly_piecess %}
                    <p>{{ turn_assembly_pieces.finish_time_assembly }}</p>
                {% endfor %}
            </div>
        {% endif %}
        {% if turn_buildings %}
            <div class="game_content_up">
                <p> Очередь развертывания заготовки </p>
                {% for turn_building in turn_buildings %}
                    <p>{{ turn_building.finish_time_deployment }}</p>
                {% endfor %}
            </div>
        {% endif %}
        <div class="game_content_up">
            <form method="post" action="choice_build"
                  enctype="multipart/form-data">
                <p>Выберите строение</p>

                <p><input class="choice_building"  type="submit" value="Жилой блок" name="housing_unit"/>
                    <input class="choice_building"  type="submit" value="Ресурсодобыча" name="mine"/>
                    <input class="choice_building"  type="submit" value="Энергопроизводство"
                           name="energy_unit"/>
                </p>
                <br>

                <p>Выберите фабрику продукции</p>

                <p><input class="choice_building"  type="submit" value="Корпуса" name="hull"/>
                    <input class="choice_building" type="submit" value="Броня" name="armor"/>
                    <input class="choice_building" type="submit" value="Щиты" name="shield"/>
                    <input class="choice_building" type="submit" value="Двигатели" name="engine"/>
                    <input class="choice_building" type="submit" value="Генераторы" name="generator"/>
                    <input class="choice_building" type="submit" value="Оружие" name="weapon"/>
                    <input class="choice_building" type="submit" value="Боеприпасы" name="shell"/>
                    <input class="choice_building" type="submit" value="Модули" name="module"/>
                    <input class="choice_building" type="submit" value="Устройства" name="device"/>
                </p>
                <br>
            </form>
        </div>

        <div class="game_content_left">
            <br>
            <br>
            {% for factory_pattern in factory_patterns %}
                {% if 9 < factory_pattern.production_class %}
                    <form method="post" action="working" enctype="multipart/form-data">
                        <H4><p align="left">{{ factory_pattern.name }}</p></H4>
                        <input class="toggle-box" id="factory{{ factory_pattern.id }}" type="checkbox" align="left">
                            <label class="slide" id="slowdown" for="factory{{ factory_pattern.id }}">Information</label>

                                <div id="tolik">
                                    <form method="post" action="working" enctype="multipart/form-data">
                                    <input type="rename_factory_pattern" value="" name="rename_factory_pattern"
                                           class="scientic_place"
                                           placeholder="Новое название фабрики"/>
                                    <input class="scientic" type="submit"
                                           value="Rename" name="rename_bottom"/>
                                    <input type="hidden" id="factory{{ factory_pattern.id }}"
                                           value={{ factory_pattern.id }} name="hidden_factory">

                                    <p align="left">
                                        {% for attribute in attributes %}
                                            <p align="left">
                                                {% load my_filter %}
                                                {% if factory_pattern|getattribute:attribute != 0 %}
                                                    {{ attribute }}
                                                    {{ factory_pattern|getattribute:attribute }}
                                                {% endif %}
                                            </p>
                                        {% endfor %}
                                    </p>
                                </form>
                                    <form method="post" action="working" enctype="multipart/form-data">
                                    {% if factory_pattern.production_class == 12 %}
                                        <p><label for="">Производство энергии</label>
                                            <select name="number" id="number">
                                                <option value="">Выберите коефициент увеличения производства</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                            </select></p>
                                    {% else %}

                                        <p><label for="">Одновременное производство</label>
                                            <select name="number" id="number">
                                                <option value="1">Выберите количество изделий за один цикл</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                            </select></p>
                                        <p><label for="">Коефициент ускорения производства</label>
                                            <select name="speed" id="speed">
                                                <option value="1">Выберите коефициент</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                            </select></p>
                                    {% endif %}
                                    <p><input id="upgrade_factory_pattern" class="scientic" type="submit"
                                              value="Upgrade" name="upgrade_factory_pattern"/>
                                        <input type="hidden" id="factory{{ factory_pattern.id }}"
                                               value={{ factory_pattern.id }} name="hidden_factory"></p>
                                </form>
                                    <form method="post" action="working" enctype="multipart/form-data">
                                    <p>Количество блоков<input type="amount_factory" value="" name="amount_factory"
                                                               class="scientic_place"
                                                               placeholder="Количество блоков фабрики"/>
                                        <input id="making_factory_unit" class="scientic" type="submit"
                                               value="Create" name="making_factory_unit"/></p>
                                    <input type="hidden" id="factory{{ factory_pattern.id }}"
                                           value={{ factory_pattern.id }} name="hidden_factory"></p>
                                </form>
                                    <form method="post" action="working" enctype="multipart/form-data">
                                    <input id="delete_factory_pattern" class="scientic" type="submit" value="Delete pattern"
                                           name="delete_factory_pattern"/>
                                    <input type="hidden" id="factory{{ factory_pattern.id }}"
                                           value={{ factory_pattern.id }} name="hidden_factory"></p>
                                </form>
                                    <form method="post" action="working" enctype="multipart/form-data">
                                    {% for warehouse_element in warehouse_elements %}
                                        {% if factory_pattern.id == warehouse_element.factory_id %}
                                            {% if warehouse_element.amount > 0 %}
                                                <p>Количество блоков на складе: {{ warehouse_element.amount }}</p>
                                                <p><input id="install_factory_unit" class="scientic"
                                                          type="submit" value="Install_unit" name="install_factory_unit"/>
                                                    <input type="hidden" id="factory{{ factory_pattern.id }}"
                                                           value={{ factory_pattern.id }} name="hidden_factory"></p>
                                                </p>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </form>
                                </div>
                    </form>
                {% endif %}
            {% endfor %}
            {% for factory_pattern in factory_patterns %}
                {% if 10 > factory_pattern.production_class %}
                    <form method="post" enctype="multipart/form-data" action="working">
                        <H4><p align="left">{{ factory_pattern.name }}</p></H4>
                        <input class="toggle-box" id="factory{{ factory_pattern.id }}" type="checkbox" align="left">
                        <label for="factory{{ factory_pattern.id }}">Information</label>

                        <div>
                            <form method="post" action="working" enctype="multipart/form-data">
                                <input type="rename_factory_pattern" value="" name="rename_factory_pattern"
                                       class="scientic_place"
                                       placeholder="Новое название фабрики"/>
                                <input id="rename_factory_pattern" class="scientic" type="submit"
                                       value="Rename" name="rename_bottom"/>
                                <input type="hidden" id="factory{{ factory_pattern.id }}"
                                       value={{ factory_pattern.id }} name="hidden_factory">

                                <p align="left">
                                    {% for attribute in attributes %}
                                        <p align="left">
                                            {% load my_filter %}
                                            {% if factory_pattern|getattribute:attribute != 0 %}
                                                {{ attribute }}
                                                {{ factory_pattern|getattribute:attribute }}
                                            {% endif %}
                                        </p>
                                    {% endfor %}
                                </p>
                            </form>
                            <form method="post" action="working" enctype="multipart/form-data">
                                {% if factory_pattern.production_class == 12 %}
                                    <p><label for="">Производство энергии</label>
                                        <select name="number" id="number">
                                            <option value="">Выберите коефициент увеличения производства</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                        </select></p>
                                {% else %}

                                    <p><label for="">Одновременное производство</label>
                                        <select name="number" id="number">
                                            <option value="1">Выберите количество изделий за один цикл</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                        </select></p>
                                    <p><label for="">Коефициент ускорения производства</label>
                                        <select name="speed" id="speed">
                                            <option value="1">Выберите коефициент</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                        </select></p>
                                {% endif %}
                                <p><input id="upgrade_factory_pattern" class="scientic" type="submit"
                                          value="Upgrade" name="upgrade_factory_pattern"/>
                                    <input type="hidden" id="factory{{ factory_pattern.id }}"
                                           value={{ factory_pattern.id }} name="hidden_factory"></p>
                            </form>
                            <form method="post" action="working" enctype="multipart/form-data">
                                <p>Количество блоков<input type="amount_factory" value="" name="amount_factory"
                                                           class="scientic_place"
                                                           placeholder="Количество блоков фабрики"/>
                                    <input id="making_factory_unit" class="scientic" type="submit"
                                           value="Create" name="making_factory_unit"/></p>
                                <input type="hidden" id="factory{{ factory_pattern.id }}"
                                       value={{ factory_pattern.id }} name="hidden_factory">
                            </form>
                            <form method="post" action="working" enctype="multipart/form-data">
                                <input id="delete_factory_pattern" class="scientic" type="submit" value="Delete pattern"
                                       name="delete_factory_pattern"/>
                                <input type="hidden" id="factory{{ factory_pattern.id }}"
                                       value={{ factory_pattern.id }} name="hidden_factory"></p>
                            </form>
                            <form method="post" action="working" enctype="multipart/form-data">
                                {% for warehouse_element in warehouse_elements %}
                                    {% if factory_pattern.id == warehouse_element.factory_id %}
                                        {% if warehouse_element.amount > 0 %}
                                            <p>Количество блоков на складе: {{ warehouse_element.amount }}</p>
                                            <p><input id="install_factory_unit" class="scientic"
                                                      type="submit" value="Install_unit" name="install_factory_unit"/>
                                                <input type="hidden" id="factory{{ factory_pattern.id }}"
                                                       value={{ factory_pattern.id }} name="hidden_factory">
                                            </p>
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </form>

                        </div>
                    </form>
                {% endif %}
            {% endfor %}
        </div>
        <div class="game_content_right">
            bhhnfghthxfgxfgjfgjfjcvcvjnfgjnxfgxbcv hdfk dfopgog54iyo 'l;dfyj 'mdfkl;hdtjgkldf/h ,.gdf/gser,. rgdfklbfgmn
            dtb
            mdfl;mh
            df
            h rtl dfmbkl ;mkldfbnklh/rtmdfm/df
            db fgh lbmfklbh tmnklfnhtf

        </div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>

{% endblock %}