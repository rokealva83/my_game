{% extends "base.html" %}
{% block title %}ВКС{% endblock %}
{% block content %}
    <div id="game_content">
        <div id="block_design_left">
            <form method="post" action="fleet_manage" enctype="multipart/form-data" style="text-align: center">
                <input value="" name="fleet_name" class="scientic_place"
                       placeholder="Fleet name"/>
                <input class="scientic" type="submit" value="New fleet" name="create_fleet"/>

                <p style="margin-top: 6px">
                    {% if ships %}
                        {% for ship in ships %}
                            {{ ship.name }} ( {{ ship.amount_ship }} )
                        {% endfor %}
                    {% endif %}
                </p>
            </form>
            {% for user_fleet in user_fleets %}
                <form method="post" action="fleet_manage" enctype="multipart/form-data" style="text-align: center">
                    <div class="fleet">
                        <p>{{ user_fleet.name }}</p>

                        <p>
                            Status:
                            {% if user_fleet.status == 0 %}
                                Waiting
                            {% else %}
                                Working
                            {% endif %}
                        </p>

                        <p>
                            Coordinate: {{ user_city.name_city }} - ({{ user_fleet.x }} : {{ user_fleet.y }}
                            : {{ user_fleet.z }})
                        </p>
                        {% for ship_fleet in ship_fleets %}
                            {% if ship_fleet.place_id == user_fleet.id %}
                                {{ ship_fleet.name }} : {{ ship_fleet.amount_ship }}
                            {% endif %}
                        {% endfor %}

                        <p>
                            <input class="scientic" type="submit" value="Navy ships" name="navy_ships"/>
                            <input class="scientic" type="submit" value="The hold of the fleet" name="hold_fleet"/>
                            <input class="scientic" type="submit" value="Flight plan" name="flight_plan"/>
                            <input type="hidden" id="user_fleet{{ user_fleet.id }}"
                                   value={{ user_fleet.id }} name="hidden_fleet"/>
                        </p>

                        <p>
                            <input class="scientic" type="submit" value="Delete fleet" name="delete_fleet"
                                   style="margin-top: 5px"/>
                            <input type="hidden" id="user_fleet{{ user_fleet.id }}"
                                   value={{ user_fleet.id }} name="hidden_fleet"/>
                        </p>

                    </div>
                </form>
            {% endfor %}
        </div>
        <div id="block_design_right">
            <h3 style="text-align: center">Панель управления флотом </h3>
            {% if command == 1 %}

                <form method="post" action="add_ship" enctype="multipart/form-data" style="text-align: center">
                    {% if add_ships %}
                        {% for add_ship in add_ships %}<p></p>
                            {{ add_ship.name }} ( {{ add_ship.amount_ship }} )
                            <input value="" name="amount_ship" class="scientic_place"
                                   placeholder="Amount ship"/>
                            <input type="hidden" value={{ fleet_id }} name="hidden_fleet"/>
                            <input type="hidden" value={{ add_ship.id }} name="hidden_ship"/>
                            <input class="scientic" type="submit" value="Добавить" name="add_ship"/></p>
                        {% endfor %}
                    {% endif %}
                </form>
                <form method="post" action="delete_ship" style="text-align: center">
                    {% if ship_fleets %}
                        {% for ship_fleet in ship_fleets %}
                            {% if ship_fleet.fleet_status == 1 and ship_fleet.place_id == fleet_id %}
                                {{ ship_fleet.name }} ( {{ ship_fleet.amount_ship }} )
                                <input value="" name="amount_ship" class="scientic_place"
                                       placeholder="Amount ship"/>
                                <input type="hidden" value={{ fleet_id }} name="hidden_fleet"/>
                                <input type="hidden" value={{ ship_fleet.id_project_ship }} name="hidden_del_ship"/>
                                <input class="scientic" type="submit" value="Убрать из флота" name="del_ship"/>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </form>
            {% endif %}
            {% if command == 2 %}
                <form method="post" action="fleet_hold" style="text-align: center">
                    {% if ship_holds %}
                        {% for ship_hold in ship_holds %}

                            {{ ship_hold.amount_shipment }}
                        {% endfor %}
                        <input class="scientic" type="submit" value="Загрузить" name="unload_allw"/></p>
                    {% endif %}


                    <p>Управление трюмом флота</p>

                    <p> Resource in warehouse
                        <select name="warehouse_module" class="scientic">
                            <option selected disabled>Choise resource</option>
                            <option value="1">Resource 1 ( {{ warehouse.resource1 }} )</option>
                            <option value="2">Resource 2 ( {{ warehouse.resource2 }} )</option>
                            <option value="3">Resource 3 ( {{ warehouse.resource3 }} )</option>
                            <option value="4">Resource 4 ( {{ warehouse.resource4 }} )</option>
                            <option value="5">Mineral 1 ( {{ warehouse.mineral1 }} )</option>
                            <option value="6">Mineral 2 ( {{ warehouse.mineral2 }} )</option>
                            <option value="7">Mineral 3 ( {{ warehouse.mineral3 }} )</option>
                            <option value="8">Mineral 4 ( {{ warehouse.mineral4 }} )</option>
                        </select>
                        <input value="" name="resource_amount" class="scientic_place" placeholder="Resource amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="resource_amount"/></p>
                    <p>
                        {% if warehouse_factorys %} Factory in warehouse
                            <select name="warehouse_hull" class="scientic">
                                <option selected disabled>Choise factory</option>
                                {% for warehouse_factory in warehouse_factorys %}
                                    {% for factory_pattern in factory_patterns %}
                                        {% if warehouse_factory.factory_id == factory_pattern.id %}
                                            {% if warehouse_factory.amount > 0 %}
                                                <option value="{{ warehouse_factory.factory_id }}">{{ factory_pattern.name }}
                                                    ( {{ warehouse_factory.amount }} )
                                                </option>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="factory_amount" class="scientic_place" placeholder="Factory amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="factory_amount"/>

                    </p>
                    <p>
                        {% if warehouse_elements %} Hull in warehouse
                            <select name="warehouse_hull" class="scientic">
                                <option selected disabled>Choise hull</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 1 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for hull_pattern in hull_patterns %}
                                                {% if hull_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ hull_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="hull_amount" class="scientic_place" placeholder="Hull amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="hull_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Armor in warehouse
                            <select name="warehouse_armor" class="scientic">
                                <option selected disabled>Choise armor</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 2 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for armor_pattern in armor_patterns %}
                                                {% if armor_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ armor_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="armor_amount" class="scientic_place" placeholder="Armor amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="armor_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Shield in warehouse
                            <select name="warehouse_shield" class="scientic">
                                <option selected disabled>Choise shield</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 3 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for shield_pattern in shield_patterns %}
                                                {% if shield_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ shield_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="shield_amount" class="scientic_place" placeholder="Shield amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="shield_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Engine in warehouse
                            <select name="warehouse_engine" class="scientic">
                                <option selected disabled>Choise engine</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 4 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for engine_pattern in engine_patterns %}
                                                {% if engine_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ engine_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="engine_amount" class="scientic_place" placeholder="Engine amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="engine_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Generator in warehouse
                            <select name="warehouse_generator" class="scientic">
                                <option selected disabled>Choise generator</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 5 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for generator_pattern in generator_patterns %}
                                                {% if generator_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ generator_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="generator_amount" class="scientic_place" placeholder="Generator amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="generator_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Weapon in warehouse
                            <select name="warehouse_weapon" class="scientic">
                                <option selected disabled>Choise weapon</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 6 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for weapon_pattern in weapon_patterns %}
                                                {% if weapon_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ weapon_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="weapon_amount" class="scientic_place" placeholder="Weapon amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="weapon_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Shell in warehouse
                            <select name="warehouse_shell" class="scientic">
                                <option selected disabled>Choise shell</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 7 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for shell_pattern in shell_patterns %}
                                                {% if shell_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ shell_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="shell_amount" class="scientic_place" placeholder="Shell amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="shell_amount"/>
                    </p>
                    <p>
                        {% if warehouse_elements %} Module in warehouse
                            <select name="warehouse_module" class="scientic">
                                <option selected disabled>Choise module</option>
                                {% for warehouse_element in warehouse_elements %}
                                    {% if warehouse_element.element_class == 8 %}
                                        {% if warehouse_element.amount > 0 %}
                                            {% for module_pattern in module_patterns %}
                                                {% if module_pattern.id == warehouse_element.element_id %}
                                                    <option value="{{ warehouse_element.element_id }}">{{ module_pattern.name }}( {{ warehouse_element.amount }}
                                                        )
                                                    </option>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </select>
                        {% endif %}
                        <input value="" name="module_amount" class="scientic_place" placeholder="Module amount"/>
                        <input class="scientic" type="submit" value="Загрузить" name="module_amount"/>
                    </p>
                </form>
            {% endif %}
            {% if command == 3 %}
                {% if flightplans %}
                    <form method="post" action="fleet_flightplan" enctype="multipart/form-data"
                          style="text-align: center;  margin-bottom: 3px; border: 1px solid; border-radius: 7px;">
                        <h3 style="text-align: center">Полетный лист</h3>
                        {% for flightplan in flightplans %}
                            {% if flightplan.class_command == 1 %}
                                {% for flightplan_flight in flightplan_flights %}
                                    {% if flightplan_flight.id_fleetplan == flightplan.id %}
                                        <div class="fleet" style="text-align: center">
                                            <p>Перелет в точку {{ flightplan_flight.finish_x }}
                                                : {{ flightplan_flight.finish_y }}
                                                : {{ flightplan_flight.finish_z }}
                                                <input type="hidden" value={{ fleet_id }} name="hidden_fleet"/>
                                                <input type="hidden"
                                                       value={{ flightplan.id }} name="hidden_flightplan_id"/>
                                                <input class="scientic" type="submit" value="Delete command"
                                                       name="delete_command"/>
                                            </p>

                                            <p>Status:
                                                {% if flightplan.status == 0 %}
                                                    stand by
                                                {% else %}
                                                    prosecution
                                                {% endif %}
                                            </p>
                                        </div>
                                    {% endif %}
                                {% endfor %}

                            {% endif %}

                        {% endfor %}
                    </form>
                    <form method="post" action="start_flight" enctype="multipart/form-data"
                          style="text-align: center;  margin-bottom: 20px;">
                        <input type="hidden" value={{ fleet_id }} name="hidden_fleet"/>
                        <input class="scientic" type="submit" value="Start flight" name="start_flight"/>
                        <input class="scientic" type="submit" value="Delete list" name="delete_list"/>

                    </form>
                {% endif %}

                <form method="post" action="fleet_flightplan" enctype="multipart/form-data"
                      style="text-align: center; border: 1px solid; border-radius: 7px;">
                    <h3 style="text-align: center">Список команд</h3>

                    <p>
                        <input type="checkbox" name="city" class="coordinate_checkbox">
                        Перелет к планете
                        <input value="0" name="planet_system" class="coordinate_place"/>
                        <input value="0" name="planet_planet" class="coordinate_place"/>
                    </p>

                    <p>
                        Использовать гипер
                        <input type="checkbox" name="planet_giper" class="coordinate_checkbox">
                        Использовать джамп
                        <input type="checkbox" name="planet_null" class="coordinate_checkbox">
                    </p>


                    <p>
                        <input type="checkbox" name="coordinate" class="coordinate_checkbox">
                        Перелет в координаты
                        <input value="0" name="coordinate_x" class="coordinate_place"/>
                        <input value="0" name="coordinate_y" class="coordinate_place"/>
                        <input value="0" name="coordinate_z" class="coordinate_place"/>
                    </p>

                    <p>
                        Системные координаты
                        <input value="0" name="coordinate_system" class="coordinate_place"/>
                        Межсистемные координаты
                        <input type="checkbox" name="coordinate_intersystem" class="coordinate_checkbox">
                    </p>

                    <p>
                        Использовать гипер
                        <input type="checkbox" name="coordinate_giper" class="coordinate_checkbox">
                        Использовать джамп
                        <input type="checkbox" name="coordinate_null" class="coordinate_checkbox">
                    </p>
                    <input type="hidden" value={{ fleet_id }} name="hidden_fleet"/>
                    <input class="scientic" type="submit" value="Add command" name="add_command"/>

                </form>
            {% endif %}
        </div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
{% endblock %}