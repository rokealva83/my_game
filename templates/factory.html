{% extends "base.html" %}

{% block title %}Производство{% endblock %}

{% block content %}
    <div id="game_content">
        {{ message }}

        <div class="game_content_up">
            <form method="post" action="choice_element"
                  enctype="multipart/form-data">
                <p>Выберите фабрику продукции</p>

                <p><input class="choice_element" id="choice_element" type="submit" value="Корпуса" name="hull"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Броня" name="armor"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Щиты" name="shield"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Двигатели" name="engine"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Генераторы"
                           name="generator"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Оружие" name="weapon"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Боеприпасы" name="shell"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Модули" name="module"/>
                    <input class="choice_element" id="choice_element" type="submit" value="Устройства" name="device"/>
                    <br>
                </p>
            </form>
        </div>

        <div class="game_content_left">
            <br>
            <br>
            {% for factory_installed in factory_installeds %}
                {% if 10 > factory_installed.production_class %}
                    <form method="post" action="production" enctype="multipart/form-data">
                        <H4><p align="left">{{ factory_installed.name }}</p></H4>
                        {% if turn_productions %}
                            <p> Очередь строительства </p>
                            {% for turn_production in turn_productions %}
                                {% if turn_production.factory_id == factory_installed.id %}
                                    <p>{{ turn_production.finish_time_production }}</p>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                        <input class="toggle-box" id="factory{{ factory_installed.id }}" type="checkbox" align="left">

                        <label for="factory{{ factory_installed.id }}">Information</label>

                        <div>

                            {% for element_pattern in element_patterns %}
                                {% if element_pattern.basic_id == factory_installed.production_id %}
                                    <H4><p align="left">{{ element_pattern.name }}</p></H4>
                                    <input class="toggle-box"
                                           id="factory{{ factory_installed.id }}element{{ element_pattern.id }}"
                                           type="checkbox"
                                           align="left">
                                    <label for="factory{{ factory_installed.id }}element{{ element_pattern.id }}">Information</label>
                                    <div>

                                        <form method="post" action="production" enctype="multipart/form-data">
                                            <input type="new_name" value="" name="new_name" id="new_name"
                                                   placeholder="Новое название модуля"/>
                                            <input id="rename" class="rename_element_pattern" type="submit"
                                                   value="Rename" name="rename_element_pattern"/>
                                            <input type="hidden" id="factory{{ factory_installed.id }}"
                                                   value={{ factory_installed.id }} name="hidden_factory">
                                            <input type="hidden" id="element{{ element_pattern.id }}"
                                                   value={{ element_pattern.id }} name="hidden_element">
                                        </form>

                                        <p align="left">
                                            {% for attribute in attributes %}
                                                <p align="left">
                                                    {% load my_filter %}
                                                    {% if element_pattern|getattribute:attribute != 0 %}
                                                        {{ attribute }}
                                                        {{ element_pattern|getattribute:attribute }}
                                                    {% endif %}
                                                </p>
                                            {% endfor %}
                                        </p>
                                        <form method="post" action="production" enctype="multipart/form-data">
                                            <p>Количество елементов<input type="amount_element" value=""
                                                                          name="amount_element"
                                                                          id="amount{{ element_pattern.id }}"
                                                                          placeholder="Количество елементов"/>
                                                <input type="hidden" id="factory{{ factory_installed.id }}"
                                                       value={{ factory_installed.id }} name="hidden_factory">
                                                <input type="hidden" id="element{{ element_pattern.id }}"
                                                       value={{ element_pattern.id }} name="hidden_element">
                                                <input id="amount_element" class="amount_element" type="submit"
                                                       value="Create" name="buttom_amount_element"/></p>
                                        </form>

                                    </div>
                                {% endif %}
                            {% endfor %}


                        </div>
                    </form>
                    <form method="post" action="production" enctype="multipart/form-data">
                        <input id="disassembling" class="disassembling" type="submit" value="Disassembling factory"
                               name="disassembling"/>
                    </form>
                {% endif %}
            {% endfor %}
        </div>
        <div class="game_content_right">
            jghjmgmnxhgjnghn gjgyjghjm gyugy
        </div>
    </div>
    <div class="clear"></div>


{% endblock %}